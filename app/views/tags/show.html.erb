<!-- タグ詳細ページ -->

<!-- タグ名 -->
<h1><%= "タグ: #{@tag.name}" %></h1>

<p>
  <!-- 編集ボタンは投稿者のみへ表示 -->
  <% if current_user == @tag.user %>
    <%= link_to "編集", edit_genre_tag_path(@genre, @tag) %>
  <% end %>
  <!-- 削除ボタンは管理者へのみ表示 -->
  <% if current_user.try(:admin?) %>
    <%= link_to "削除", genre_tag_path(@genre, @tag), method: :delete, data: {confirm: "Termを削除してよろしいですか？"} %>
  <% end %>
</p>

<h2><%= "#{@tag.name}(#{@genre.name})のタグを付けられた用語一覧" %></h2>

<ul>
  <!-- タグに紐づいたTermの一覧 -->
  <% @tag.terms.each do |term| %>
    <li class="term-name">
      <!-- Term名 -->
      <%= link_to "#{term.name}", term_path(term) %>
      <!-- ジャンル名 -->
      <% if term.genre.present? %>
        <%= "(#{term.genre.name})" %>
      <% else %>
        <%= "(ジャンル選択なし)" %>
      <% end %>
    </li>
    <li class="tag-list">
      <!-- Termに紐づいたタグ一覧 -->
      <% term.tags.each do |tag| %>
        <%= link_to tag.name, genre_tag_path(tag.genre, tag), class:"btn btn-primary border-dark text-white btn-sm" %>
      <% end %>
    </li>
    <!-- Termに付いた解説数 -->
    <li class="description-numbers">
      <%= link_to "解説(#{term.descriptions.count})", term_path(term, anchor: "descriptions-list") %> <!-- アンカーってなんだっけ。。 -->
    </li>
    <hr>
  <% end %>
  <% if @tag.terms.count == 0 %>
    <%= "タグ付けされたTermはありません。" %>
  <% end %>
</ul>
